{% extends "base.html" %}
{% block title %}Edit Sell Exit{% endblock %}
{% block content %}
<h2>Edit Sell Exit – {{ trade.stock_name }}</h2>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% for category, message in messages %}
    <div class="flash-{{ category }}">{{ message }}</div>
  {% endfor %}
{% endwith %}

<form method="POST" action="{{ url_for('trades.edit_exit', exit_id=exit.id) }}">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">  <!-- CSRF Token -->
  <label for="quantity">Quantity</label>
  <input type="number" name="quantity" id="quantity" value="{{ exit.quantity }}" required />

  <label for="price">Sell Price</label>
  <input type="number" step="0.01" name="price" id="price" value="{{ exit.price }}" required />

  <label for="date">Date</label>
  <input type="date" name="date" id="date" value="{{ exit.date.isoformat() }}" required />

  <label for="note">Note</label>
  <textarea name="note" id="note" rows="3" placeholder="Add exit rationale...">{{ exit.note }}</textarea>

  <button type="submit">✅ Update Sell Exit</button>
  <a href="{{ url_for('trades.view_trade', trade_id=trade.id) }}">Cancel</a>
</form>
{% endblock %}
